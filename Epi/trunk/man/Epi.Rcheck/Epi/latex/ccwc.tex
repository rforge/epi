\HeaderA{ccwc}{Generate a nested case-control study}{ccwc}
\keyword{datagen}{ccwc}
\begin{Description}\relax
Given the basic outcome variables for a cohort study: the time of entry 
to the cohort, the time of exit and the reason for exit ("failure" or
"censoring"), this function computes risk sets and generates a matched
case-control study in which each case is compared with a set of controls
randomly sampled from the appropriate risk set. Other variables may be
matched when selecting controls.
\end{Description}
\begin{Usage}
\begin{verbatim}
ccwc(entry=0, exit, fail, origin=0, controls=1, match=list(), include=list(), data=NULL, silent=F)
\end{verbatim}
\end{Usage}
\begin{Arguments}
\begin{ldescription}
\item[\code{entry}] Time of entry to follow-up

\item[\code{exit}] Time of exit from follow-up

\item[\code{fail}] Status on exit (1=Fail, 0=Censored)

\item[\code{origin}] Origin of analysis time scale

\item[\code{controls}] The number of controls to be selected for each case

\item[\code{match}] List of categorical variables on which to match cases and controls

\item[\code{include}] List of other variables to be carried across into the case-control
study

\item[\code{data}] Data frame in which to look for input variables

\item[\code{silent}] If  False, echos a . to the screen for each case-control set
created; otherwise produces no output.

\end{ldescription}
\end{Arguments}
\begin{Value}
The case-control study, as a  dataframe containing:
\begin{ldescription}
\item[\code{Set}] case-control set number

\item[\code{Map}] row number of record in input dataframe

\item[\code{Time}] failure time of the case in this set

\item[\code{Fail}] failure status (1=case, 0=control)

\end{ldescription}

These are followed by the matching variables, and finally by the
variables in the \code{include} list
\end{Value}
\begin{Author}\relax
David Clayton
\end{Author}
\begin{References}\relax
Clayton and Hills, Statistical Models in Epidemiology, Oxford
University Press, Oxford:1993.
\end{References}
\begin{SeeAlso}\relax
\code{\LinkA{Lexis}{Lexis}}
\end{SeeAlso}
\begin{Examples}
\begin{ExampleCode}
#
# For the diet and heart dataset, create a nested case-control study
# using the age scale and matching on job
#
data(diet)
dietcc <- ccwc(doe, dox, chd, origin=dob, controls=2, data=diet,
               include=energy, match=job)
\end{ExampleCode}
\end{Examples}

